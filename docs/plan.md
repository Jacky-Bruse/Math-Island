# 数力岛（ShuLi Island / MathPower Island）产品方案（PWA / 平板优先）

## 1. 目标与范围

- 面向平板端的儿童数学与逻辑训练应用
- 三个独立训练入口：**加减法 / 比大小 / 数独**
- 入口内仅包含本类型练习，不进行题型混合
- 支持 PWA 安装与离线使用
- 家庭局域网使用场景下可稳定访问

---

## 2. 信息架构与页面结构

### 2.1 首页（Home）
- 三个大卡片入口（整块可点击，触控友好）：
  - 加减法
  - 比大小
  - 数独
- 首页唯一设置入口（低频触发方式，例如长按打开）

### 2.2 加减法入口结构
- 二级选择：**10以内 / 20以内 / 100以内**
- 进入练习页开始训练

### 2.3 比大小入口结构
- 进入即开始训练  
- 比较对象：两位数 **10–99**
- 比较符号仅包含：**“>” / “<”**

### 2.4 数独入口结构
- 二级选择：**4×4 / 6×6 / 8×8（挑战）**
- 进入单盘界面开始训练

### 2.5 休息建议页（Break）
- 训练到达设定时长后弹出
- 支持休息倒计时与继续选项

---

## 3. 设置与生效规则

### 3.1 设置范围（单屏）
- 声音：开 / 关
- 训练时段：**15 / 20 / 30 分钟**（默认 20 分钟）
- 题目提示次数：加减法/比大小 **每题 1 次**（固定）
- 数独提示次数：**每盘 3 次**（固定）
- 数独默认尺寸入口（可选）

### 3.2 设置入口与限制
- 设置仅在首页可修改
- 训练中不提供设置入口与修改能力
- 修改需中断练习并返回首页

### 3.3 生效时机
- 设置修改仅对**下一次开始的练习**生效
- 已开始的练习不受影响

---

## 4. 统一训练节奏与休息机制

### 4.1 训练时段
- 每次训练按设置的 15/20/30 分钟计时
- 到点弹出休息建议页，不强制中断

### 4.2 休息建议页行为
- 主按钮：休息 3 分钟（倒计时）
- 次按钮：继续
  - 加减法/比大小：继续后追加固定数量题目（例如 3 题）后结束
  - 数独：继续当前盘面，不重置、不换盘

### 4.3 退出与返回
- 训练中退出/返回首页需二次确认
- 退出后当前训练计时终止
- 数独盘面可选保留本地草稿用于恢复

---

## 5. 加减法模块（10/20/100 以内）

### 5.1 范围与约束（严格规则）
- 10以内：操作数与结果均不超过 10；允许出现 0；减法结果不为负
- 20以内：操作数与结果均不超过 20；允许出现 0；减法结果不为负
- 100以内：操作数与结果均不超过 100；允许进位与退位；允许出现 0；减法结果不为负

### 5.2 交互与输入
- 题面大字号展示：`a + b = ?` 或 `a − b = ?`
- 答案输入使用自定义数字键盘（0–9、退格、清空、确认），不唤起系统键盘
- 每题提交后即时反馈并进入下一题

### 5.3 出题组织（模块内渐进）
- 同一范围内覆盖从简单到接近上限的题目分布
- 100以内逐步提高进位/退位出现比例，保证题目难度分布稳定且可控

### 5.4 提示机制（每题限制 1 次）
- 提示采用轻量步骤化信息：
  - 提醒先算个位再算十位
  - 进位/退位规则提醒
  - 十位/个位的强调式显示用于聚焦关键位
- 第二次错误触发简短分步解释后进入下一题

---

## 6. 比大小模块（两位数 10–99，不启用等号）

### 6.1 范围与按钮
- 数字范围：10–99
- 判断按钮仅包含：**“>” 与 “<”**
- 题目生成避免相等对

### 6.2 题目分层（模块内渐进）
- 优先分布：十位不同的对比
- 逐步加入：十位相同、比较个位的对比
- 最终混合分布（仍无相等）

### 6.3 提示机制（每题限制 1 次）
- 提示与解释采用“先比较十位、十位相同再比较个位”的高亮引导

---

## 7. 数独模块（4×4 / 6×6 / 8×8，统一引擎）

### 7.1 模式定义
- 以完成一盘为单位，进入后保持同一盘面持续填写
- 8×8作为挑战模式单独标识

### 7.2 统一引擎规格（参数化）
- size：4 / 6 / 8
- 宫格尺寸：
  - 4×4：2×2
  - 6×6：2×3
  - 8×8：2×4
- 数据包含：题面 givens（空格为 0）与完整解 solution

### 7.3 题目生成质量要求
- 每盘必须可解
- 4×4 与 6×6需唯一解
- 8×8尽量唯一解
- 难度控制基于挖空策略与推理复杂度，避免必须猜的局面

### 7.4 界面与交互
- 点选格子后高亮：同一行/列/宫
- 底部数字面板：1..N + 橡皮擦
- 冲突提示温和且局部，提示冲突位置与冲突原因；不自动清空输入
- 完成校验通过“完成”按钮触发全盘校验；可选实时冲突检查开关

### 7.5 提示机制（每盘限制 3 次）
- 提示形式：给出一个可填位置、给出当前格一个正确数字、指出当前明显冲突点

---

## 8. 儿童友好与可爱 UI 规范

### 8.1 触控与排版
- 主按钮、数字键、数独数字面板均采用大尺寸与大间距
- 信息层级清晰：题面/盘面优先，辅助信息最小化
- 单屏聚焦一个任务，减少干扰元素

### 8.2 视觉风格
- 圆角卡片与柔和阴影层级
- 图标化提示与统一的吉祥物/角色气泡承载简短文案
- 奖励采用贴纸/星星碎片收集形式，不使用分数排名

### 8.3 动效与音效
- 动效短、不阻塞流程
- 音效分级（点击/正确/提示/完成），支持静音
- 休息页降刺激呈现

---

## 9. 本地数据与状态保存

- 保存内容：设置项、最近一次选择的模块与子模式
- 不保存题目历史与训练记录
- 数独盘面可选保存未完成草稿以支持恢复

---

## 10. PWA 与离线能力

- Web App Manifest、应用图标、启动页配置齐全
- 启用离线缓存：缓存应用壳与静态资源，确保弱网/断网可进入并继续训练
- 更新策略：新版本可用时提示刷新，避免训练中资源切换导致异常

---

## 11. 部署与缓存要求（NAS Docker + HTTPS）

- 静态站点部署（构建产物为静态资源）
- HTTPS 访问以满足 PWA 安全上下文
- 缓存策略：
  - 入口页不强缓存，确保版本可更新
  - 版本化静态资源强缓存以提升加载速度
  - Service Worker 文件不强缓存，避免更新失效

---

## 12. 验收标准

### 12.1 功能正确性
- 加减法三档严格满足“操作数与结果不超过上限”；减法无负数；100以内允许进位/退位；允许出现0
- 比大小仅 “> / <”，无“=”按钮且不出现相等题
- 数独每盘可解；4×4与6×6唯一解；提示次数限制生效；冲突检测准确

### 12.2 可用性与稳定性
- 平板触控误触率可控；数字键盘与数独数字面板可单手操作
- 训练到达设定时长稳定触发休息页；继续逻辑符合模块定义
- 离线可用（首次打开并缓存后）；更新后无资源错乱与白屏问题
